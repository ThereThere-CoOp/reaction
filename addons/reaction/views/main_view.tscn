[gd_scene load_steps=20 format=3 uid="uid://bqf20gwkbuy8n"]

[ext_resource type="Script" path="res://addons/reaction/views/main_view.gd" id="1_2hpc4"]
[ext_resource type="Script" path="res://addons/reaction/components/GlobalFacts.gd" id="2_bgi7c"]
[ext_resource type="PackedScene" uid="uid://jc4ei7i0bj2v" path="res://addons/reaction/components/edit_database_dialog.tscn" id="2_jeeb5"]
[ext_resource type="PackedScene" uid="uid://tycacr0sxsef" path="res://addons/reaction/views/settings_view.tscn" id="3_6kxn8"]
[ext_resource type="PackedScene" uid="uid://dt65kcmm087t4" path="res://addons/reaction/components/item_list.tscn" id="3_cpcid"]
[ext_resource type="Script" path="res://addons/reaction/scripts/items/ReactionFactItem.gd" id="4_jdoy6"]
[ext_resource type="Script" path="res://addons/reaction/components/Events.gd" id="5_s4hfs"]
[ext_resource type="Script" path="res://addons/reaction/components/Rules.gd" id="7_4prge"]
[ext_resource type="Script" path="res://addons/reaction/scripts/items/ReactionRuleCriteria.gd" id="8_oki5c"]
[ext_resource type="PackedScene" uid="uid://bujjba3nge54o" path="res://addons/reaction/components/ListObjectForm.tscn" id="9_4equ7"]
[ext_resource type="PackedScene" uid="uid://dsufgalqph53w" path="res://addons/reaction/components/criteria.tscn" id="9_s7bes"]

[sub_resource type="Image" id="Image_50vm8"]
data = {
"data": PackedByteArray(255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 94, 94, 127, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 93, 93, 255, 255, 94, 94, 127, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 94, 94, 127, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 94, 94, 127, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 231, 255, 94, 94, 54, 255, 94, 94, 57, 255, 93, 93, 233, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 231, 255, 94, 94, 54, 255, 94, 94, 57, 255, 93, 93, 233, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 97, 97, 42, 255, 255, 255, 0, 255, 255, 255, 0, 255, 97, 97, 42, 255, 93, 93, 233, 255, 93, 93, 232, 255, 93, 93, 41, 255, 255, 255, 0, 255, 255, 255, 0, 255, 97, 97, 42, 255, 93, 93, 233, 255, 93, 93, 232, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 96, 96, 45, 255, 93, 93, 44, 255, 255, 255, 0, 255, 97, 97, 42, 255, 97, 97, 42, 255, 255, 255, 0, 255, 96, 96, 45, 255, 93, 93, 44, 255, 255, 255, 0, 255, 97, 97, 42, 255, 97, 97, 42, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 96, 96, 45, 255, 93, 93, 235, 255, 94, 94, 234, 255, 95, 95, 43, 255, 255, 255, 0, 255, 255, 255, 0, 255, 96, 96, 45, 255, 93, 93, 235, 255, 94, 94, 234, 255, 95, 95, 43, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 235, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 233, 255, 95, 95, 59, 255, 96, 96, 61, 255, 93, 93, 235, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 233, 255, 95, 95, 59, 255, 96, 96, 61, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 93, 93, 255, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0, 255, 255, 255, 0),
"format": "RGBA8",
"height": 16,
"mipmaps": false,
"width": 16
}

[sub_resource type="ImageTexture" id="ImageTexture_v7w4i"]
image = SubResource("Image_50vm8")

[sub_resource type="Resource" id="Resource_qew6w"]
script = ExtResource("4_jdoy6")
type = 0
is_enum = false
trigger_signal_on_modified = false
uid = "2ed2e79a-3639-4f54-88f9-d98b292597c9"
label = "item_label"
description = "Item long description"
scope = "Global"

[sub_resource type="GDScript" id="GDScript_qoikp"]
script/source = "@tool
class_name ReactionEventItem
extends ReactionBaseItem
## ----------------------------------------------------------------------------[br]
## Resource item to storage a reaction event.
##
## Event must have label like (OLD_MAN_NPC_CONVERSATION,
## ROOM_DESCRIPTION) that represents the nature of the event. Have attached
## several rules, and the ones that matchs the current world state will return
## the responses attached to it. [br]
## ----------------------------------------------------------------------------

## array of ordered rules to be checked for this concept,
## rules are ordered for their criteria count in descending order
@export var rules: Array[ReactionRuleItem]:
	set(value):
		var new_rules: Array[ReactionRuleItem] = []
		var temp_priority_rules: Array[ReactionRuleItem] = []
		var temp_non_priority_rules: Array[ReactionRuleItem] = []

		for rule in value:
			if rule and rule.priority > 0:
				temp_priority_rules.append(rule)
			else:
				temp_non_priority_rules.append(rule)

		temp_priority_rules.sort_custom(_sort_priority_rules)

		temp_non_priority_rules.sort_custom(
			func(a, b): return a.get_criterias_count() > b.get_criterias_count()
		)

		new_rules.append_array(temp_priority_rules)
		new_rules.append_array(temp_non_priority_rules)

		rules = new_rules

		if Engine.is_editor_hint():
			notify_property_list_changed()


## ----------------------------------------------------------------------------[br]
## fuction to sort rules when have priority higher than 0 [br]
## ----------------------------------------------------------------------------
func _sort_priority_rules(a, b):
	if a.priority < b.priority:
		return true

	if a.priority == b.priority:
		return a.get_criterias_count() > b.get_criterias_count()

	return false
	

## ----------------------------------------------------------------------------[br]
## Add a rule to event and reorder the rules using priority and rule's criteria 
## numbers [br]
## [b]Parameter(s):[/b] [br]
## [b]* rule | ReactionRuleItem:[/b] New rule to add [br]
## [b]Returns: void [br]
## ----------------------------------------------------------------------------
func add_rule(rule: ReactionRuleItem) -> void:
	var new_rules: Array[ReactionRuleItem] = rules.duplicate()
	new_rules.append(rule)
	
	## reordering occurs cause set method
	rules = new_rules
	
	
## ----------------------------------------------------------------------------[br]
## Remove a rule from event and reorder the rules using priority and rule's 
## criteria numbers [br]
## [b]Parameter(s):[/b] [br]
## [b]* rule_uid | String:[/b] Uid of the rule to remove [br]
## [b]Returns: void [br]
## ----------------------------------------------------------------------------
func remove_rule(rule_uid: String) -> void:
	var new_rules: Array[ReactionRuleItem] = rules.duplicate()
	var index = 0
	for rule in new_rules:
		if rule.uid == rule_uid:
			break
		index += 1
	
	new_rules.remove_at(index)
	
	## reordering occurs cause set method
	rules = new_rules
	
	
## ----------------------------------------------------------------------------[br]
## Get responses for this event based on the rules and current world's game
## context [br]
## [b]Parameter(s):[/b] [br]
## [b]* context | [ReactionBlackboard]:[/b] Current world's game context [br]
## [b]Returns:  Array[[ReactionResponseBaseItem]][/b] [br]
## Responses group of the first matching rule  [br]
## ----------------------------------------------------------------------------
func get_responses(context: ReactionBlackboard) -> Array[ReactionResponseBaseItem]:
	for rule in rules:
		if rule.test(context):
			context.clean_scope(\"Event\")
			rule.execute_modifications(context)
			return rule.responses.get_responses()

	return []


func get_new_object():
	return ReactionEventItem.new()
"

[sub_resource type="Resource" id="Resource_ayc12"]
script = SubResource("GDScript_qoikp")
rules = Array[null]([])
uid = "808b11c9-053a-4ee8-91c1-ccec8b6105b9"
label = "item_label"
description = "Item long description"
scope = "Global"

[sub_resource type="GDScript" id="GDScript_58346"]
script/source = "@tool
class_name ReactionRuleItem
extends ReactionBaseItem
## ----------------------------------------------------------------------------[br]
## Class item to storage and manage a reaction rule.
##
## A rule contains a list of criteria and at least a response group
## (a ReactionResponseGroupItem). When the criterias are met the rule
## responses are returned. [br]
## ----------------------------------------------------------------------------

## rules criterias
@export var criterias: Array[ReactionRuleCriteria]

## rules context modifications
@export var modifications: Array[ReactionContextModification]

## specify if the rule need to match only once
@export var match_once := false

## the rules with priority higher than 0 will be ordered first
## from higher priority to lower, if priority is cero
## rule is ordered by number of rules
@export var priority: int = 0

## rule group of responses
@export var responses: ReactionResponseGroupItem


## Returns the length of the rule criterias array
func get_criterias_count() -> int:
	return len(criterias)


## ----------------------------------------------------------------------------[br]
## Return true if the rule criterias match with the blackboard context
## passed as parameter, false if not [br]
## [b]Parameter(s):[/b] [br]
## [b]* context | [ReactionBlackboard]:[/b] Blackboard context to check if rule
## match with facts data [br]
## [b]Returns: bool[/b] [br]
## Returns true if rule matchs with the context  [br]
## ----------------------------------------------------------------------------
func test(context: ReactionBlackboard) -> bool:
	for criteria in criterias:
		var current_bfact = context.get_blackboard_fact(criteria.fact.uid)

		# if criteria fact do not exists on blackboard
		# rule do not match
		if current_bfact == null:
			return false

		if not criteria.test(current_bfact):
			return false

	return true


## ----------------------------------------------------------------------------[br]
## Executes all the modifications of the rules on the context [br]
## [b]Parameter(s):[/b] [br]
## [b]* context | [ReactionBlackboard]:[/b] Context were the modifictions
## will be applied [br]
## [b]Returns: void[/b] [br]
## ----------------------------------------------------------------------------
func execute_modifications(context: ReactionBlackboard) -> void:
	for modification in modifications:
		modification.execute(context)
		

## ----------------------------------------------------------------------------[br]
## Add a criteria to the rule [br]
## [b]Parameter(s):[/b] [br]
## [b]* criteria | ReactionRuleCriteria:[/b] Criteria to add to the rule [br]
## [b]Returns: void[/b] [br]
## ----------------------------------------------------------------------------
func add_criteria(criteria: ReactionRuleCriteria) -> void:
	criterias.append(criteria)
	
	
## ----------------------------------------------------------------------------[br]
## Remove a criteria from the rule using the index [br]
## [b]Parameter(s):[/b] [br]
## [b]* index | int:[/b] Index of the criteria to remove [br]
## [b]Returns: void[/b] [br]
## ----------------------------------------------------------------------------
func remove_criteria_by_index(index: int) -> void:
	criterias.remove_at(index)
		
		
func get_new_object():
	return ReactionRuleItem.new()
"

[sub_resource type="Resource" id="Resource_cuk1u"]
script = SubResource("GDScript_58346")
criterias = Array[ExtResource("8_oki5c")]([])
modifications = Array[Resource("res://addons/reaction/scripts/items/ReactionContextModification.gd")]([])
match_once = false
priority = 0
uid = "4a8b88fa-f98d-4d00-9acd-4e8bb9db5d40"
label = "item_label"
description = "Item long description"
scope = "Global"

[sub_resource type="Resource" id="Resource_egqoh"]
script = ExtResource("8_oki5c")
label = ""
operation = ""
is_reverse = false

[node name="MainView" type="Control"]
clip_contents = true
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
script = ExtResource("1_2hpc4")

[node name="MainRows" type="VBoxContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="PluginTitle" type="Label" parent="MainRows"]
layout_mode = 2
text = "Reaction (v1.0.0)"
horizontal_alignment = 1

[node name="ToolBar" type="HBoxContainer" parent="MainRows"]
layout_mode = 2

[node name="AddDatabaseButton" type="Button" parent="MainRows/ToolBar"]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Add Database"
icon = SubResource("ImageTexture_v7w4i")
flat = true

[node name="VSeparator" type="VSeparator" parent="MainRows/ToolBar"]
layout_mode = 2

[node name="DatabaseMenuButton" type="MenuButton" parent="MainRows/ToolBar"]
unique_name_in_owner = true
custom_minimum_size = Vector2(170, 0)
layout_mode = 2
text = "default_database"
icon = SubResource("ImageTexture_v7w4i")
item_count = 1
popup/item_0/text = "default_database"
popup/item_0/icon = SubResource("ImageTexture_v7w4i")
popup/item_0/id = 0

[node name="EditDatabaseButton" type="Button" parent="MainRows/ToolBar"]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Edit Database"
icon = SubResource("ImageTexture_v7w4i")
flat = true

[node name="RemoveDatabaseButton" type="Button" parent="MainRows/ToolBar"]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Remove Database"
icon = SubResource("ImageTexture_v7w4i")
flat = true

[node name="SettingsButton" type="Button" parent="MainRows/ToolBar"]
unique_name_in_owner = true
layout_mode = 2
tooltip_text = "Settings"
icon = SubResource("ImageTexture_v7w4i")
flat = true

[node name="DatabaseDataManagment" type="TabContainer" parent="MainRows"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
current_tab = 1

[node name="GlobalFacts" type="MarginContainer" parent="MainRows/DatabaseDataManagment"]
unique_name_in_owner = true
visible = false
layout_mode = 2
theme_override_constants/margin_left = 7
theme_override_constants/margin_top = 7
theme_override_constants/margin_right = 7
theme_override_constants/margin_bottom = 7
script = ExtResource("2_bgi7c")

[node name="FactsMainPanel" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 10

[node name="FactsList" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel" instance=ExtResource("3_cpcid")]
unique_name_in_owner = true
layout_mode = 2
item_name = "fact"
reaction_resource = SubResource("Resource_qew6w")

[node name="FactDataContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel"]
unique_name_in_owner = true
visible = false
layout_mode = 2
size_flags_horizontal = 3

[node name="ColumnsContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 15

[node name="LeftColumnContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 10

[node name="FactNameInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="Label" type="Label" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/FactNameInputContainer"]
layout_mode = 2
text = "Fact Name: "

[node name="FactNameInputLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/FactNameInputContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "PLAYER_VITALITY"

[node name="TypeInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer"]
layout_mode = 2

[node name="TypeLabel" type="Label" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/TypeInputContainer"]
layout_mode = 2
text = "Type:"

[node name="FactTypeMenuButton" type="MenuButton" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/TypeInputContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "Number"
item_count = 3
popup/item_0/text = "String"
popup/item_0/id = 0
popup/item_1/text = "Number"
popup/item_1/id = 1
popup/item_2/text = "Boolean"
popup/item_2/id = 2

[node name="FactIsSignalCheckButton" type="CheckButton" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "Send signal on modified?"

[node name="RightColumnContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 10

[node name="UidContainerContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer"]
layout_mode = 2

[node name="UidLabel" type="Label" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/UidContainerContainer"]
layout_mode = 2
text = "Uid:
"

[node name="FactUidValue" type="LineEdit" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/UidContainerContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "123e4567-e89b-12d3-a456-426655440000"
editable = false

[node name="FactIsEnumCheckButton" type="CheckButton" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "Is enum?:"

[node name="FactHintStringInputContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer"]
unique_name_in_owner = true
layout_mode = 2

[node name="HintStringInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactHintStringInputContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="Label" type="Label" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactHintStringInputContainer/HintStringInputContainer"]
layout_mode = 2
text = "Hint String: "

[node name="FactHintStringLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactHintStringInputContainer/HintStringInputContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "value1,value2"

[node name="HintStringTipLabel" type="Label" parent="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactHintStringInputContainer"]
layout_mode = 2
theme_override_colors/font_color = Color(0.541176, 0.541176, 0.541176, 1)
theme_override_font_sizes/font_size = 13
text = "Tip: Hint string must be comma separeted values"

[node name="Events" type="MarginContainer" parent="MainRows/DatabaseDataManagment"]
unique_name_in_owner = true
layout_mode = 2
theme_override_constants/margin_left = 7
theme_override_constants/margin_top = 7
theme_override_constants/margin_right = 7
theme_override_constants/margin_bottom = 7
script = ExtResource("5_s4hfs")

[node name="Rows" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events"]
layout_mode = 2

[node name="EventsMainPanel" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/separation = 10

[node name="EventsList" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel" instance=ExtResource("3_cpcid")]
unique_name_in_owner = true
layout_mode = 2
item_name = "event"
item_list_field_name = "events"
add_function_name = "add_event"
remove_function_name = "remove_event"
reaction_resource = SubResource("Resource_ayc12")

[node name="EventDataContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel"]
unique_name_in_owner = true
visible = false
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 5

[node name="NameUidContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer"]
layout_mode = 2
theme_override_constants/separation = 20

[node name="EventNameInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 10

[node name="Label" type="Label" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer/EventNameInputContainer"]
layout_mode = 2
text = "Event Name: "

[node name="EventNameLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer/EventNameInputContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "CHAR_OLD_MAN"

[node name="UidContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="UidLabel" type="Label" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer/UidContainer"]
layout_mode = 2
text = "Uid:
"

[node name="EventUidLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer/UidContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "123e4567-e89b-12d3-a456-426655440000"
editable = false

[node name="Rules" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_vertical = 3
script = ExtResource("7_4prge")

[node name="RulesList" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" instance=ExtResource("3_cpcid")]
unique_name_in_owner = true
custom_minimum_size = Vector2(300, 250)
layout_mode = 2
size_flags_vertical = 3
item_name = "rule"
item_list_field_name = "rules"
add_function_name = "add_rule"
remove_function_name = "remove_rule"
reaction_resource = SubResource("Resource_cuk1u")

[node name="RuleDataContainer" type="TabContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules"]
unique_name_in_owner = true
visible = false
layout_mode = 2
size_flags_vertical = 3

[node name="General" type="MarginContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer"]
layout_mode = 2

[node name="DataContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General"]
layout_mode = 2

[node name="LeftColumnContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="RuleNameInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="Label" type="Label" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer/RuleNameInputContainer"]
layout_mode = 2
text = "Rule Name: "

[node name="RuleNameLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer/RuleNameInputContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "firstMeeting"

[node name="RuleMatchOnceCheckButton" type="CheckButton" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "Match Once"

[node name="RightColumnContainer" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="UidContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="UidLabel" type="Label" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer/UidContainer"]
layout_mode = 2
text = "Uid: "

[node name="RuleUidLineEdit" type="LineEdit" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer/UidContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
text = "123e4567-e89b-12d3-a456-426655440000"
editable = false

[node name="PriorityInputContainer" type="HBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer"]
layout_mode = 2
theme_override_constants/separation = 10

[node name="Label" type="Label" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer/PriorityInputContainer"]
layout_mode = 2
text = "Priority: "

[node name="RulePrioritySpinBox" type="SpinBox" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/RightColumnContainer/PriorityInputContainer"]
unique_name_in_owner = true
layout_mode = 2
max_value = 1e+06

[node name="Criterias" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer" instance=ExtResource("9_4equ7")]
unique_name_in_owner = true
visible = false
layout_mode = 2
object_name = "criteria"
objects_list_field_name = "criterias"
parent_object_add_function_name = "add_criteria"
object_resource_class = SubResource("Resource_egqoh")
object_scene = ExtResource("9_s7bes")

[node name="Modifications" type="MarginContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer"]
visible = false
layout_mode = 2

[node name="Rows" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/Modifications"]
layout_mode = 2

[node name="AddModificationButton" type="Button" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/Modifications/Rows"]
layout_mode = 2
size_flags_horizontal = 0
text = "Add Criteria"

[node name="ModificationsScrollContainer" type="ScrollContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/Modifications/Rows"]
layout_mode = 2
size_flags_vertical = 3

[node name="ModificationsRows" type="VBoxContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/Modifications/Rows/ModificationsScrollContainer"]
layout_mode = 2

[node name="Responses" type="MarginContainer" parent="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer"]
visible = false
layout_mode = 2

[node name="EditDatabaseDialog" parent="." instance=ExtResource("2_jeeb5")]
unique_name_in_owner = true
position = Vector2i(0, 36)

[node name="RemoveDatabaseConfirmationDialog" type="ConfirmationDialog" parent="."]
unique_name_in_owner = true

[node name="SettingsDialog" type="AcceptDialog" parent="."]
unique_name_in_owner = true
title = "Settings"
size = Vector2i(800, 300)
min_size = Vector2i(700, 300)

[node name="SettingsView" parent="SettingsDialog" instance=ExtResource("3_6kxn8")]

[connection signal="theme_changed" from="." to="." method="_on_main_view_theme_changed"]
[connection signal="pressed" from="MainRows/ToolBar/AddDatabaseButton" to="." method="_on_add_database_button_pressed"]
[connection signal="about_to_popup" from="MainRows/ToolBar/DatabaseMenuButton" to="." method="_on_database_menu_about_to_popup"]
[connection signal="pressed" from="MainRows/ToolBar/EditDatabaseButton" to="." method="_on_edit_database_button_pressed"]
[connection signal="pressed" from="MainRows/ToolBar/RemoveDatabaseButton" to="." method="_on_remove_database_button_pressed"]
[connection signal="pressed" from="MainRows/ToolBar/SettingsButton" to="." method="_on_settings_button_pressed"]
[connection signal="item_added" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactsList" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_facts_list_item_added"]
[connection signal="item_removed" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactsList" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_facts_list_item_removed"]
[connection signal="item_selected" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactsList" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_facts_list_item_selected"]
[connection signal="text_submitted" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/FactNameInputContainer/FactNameInputLineEdit" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_fact_name_input_line_edit_text_submitted"]
[connection signal="pressed" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/LeftColumnContainer/FactIsSignalCheckButton" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_fact_is_signal_check_button_pressed"]
[connection signal="toggled" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactIsEnumCheckButton" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_fact_is_enum_check_button_toogled"]
[connection signal="text_submitted" from="MainRows/DatabaseDataManagment/GlobalFacts/FactsMainPanel/FactDataContainer/ColumnsContainer/RightColumnContainer/FactHintStringInputContainer/HintStringInputContainer/FactHintStringLineEdit" to="MainRows/DatabaseDataManagment/GlobalFacts" method="_on_fact_hint_string_line_edit_text_submitted"]
[connection signal="item_added" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventsList" to="MainRows/DatabaseDataManagment/Events" method="_on_events_list_item_added"]
[connection signal="item_removed" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventsList" to="MainRows/DatabaseDataManagment/Events" method="_on_events_list_item_removed"]
[connection signal="item_selected" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventsList" to="MainRows/DatabaseDataManagment/Events" method="_on_events_list_item_selected"]
[connection signal="text_submitted" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/NameUidContainer/EventNameInputContainer/EventNameLineEdit" to="MainRows/DatabaseDataManagment/Events" method="_on_event_name_input_line_edit_text_submitted"]
[connection signal="item_added" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RulesList" to="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" method="_on_rules_list_item_added"]
[connection signal="item_removed" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RulesList" to="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" method="_on_rules_list_item_removed"]
[connection signal="item_selected" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RulesList" to="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" method="_on_rules_list_item_selected"]
[connection signal="text_submitted" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer/RuleNameInputContainer/RuleNameLineEdit" to="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" method="_on_rule_name_input_line_edit_text_submitted"]
[connection signal="pressed" from="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules/RuleDataContainer/General/DataContainer/LeftColumnContainer/RuleMatchOnceCheckButton" to="MainRows/DatabaseDataManagment/Events/Rows/EventsMainPanel/EventDataContainer/Rules" method="_on_rule_match_once_check_button_pressed"]
[connection signal="confirmed" from="EditDatabaseDialog" to="EditDatabaseDialog" method="_on_edit_board_dialog_confirmed"]
[connection signal="database_updated" from="EditDatabaseDialog" to="." method="_on_edit_database_dialog_database_updated"]
[connection signal="confirmed" from="RemoveDatabaseConfirmationDialog" to="." method="_on_remove_database_confirmation_dialog_confirmed"]
[connection signal="databases_path_changed" from="SettingsDialog/SettingsView" to="." method="_on_setting_database_path_updated"]
